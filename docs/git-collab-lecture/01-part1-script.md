## 1부 스크립트 (45분) — 이론 + 라이브 코딩 + Q&A

### 진행 목표(강사 멘트)
- “오늘은 **팀 협업에서 가장 자주 터지는 4가지**만 딱 끝냅니다:  
  **충돌 해결 / push rejected 해결 / stash / 복구**”
- “중요한 건 암기가 아니라 **상황을 읽고(원인 파악) → 안전한 해결 루트를 선택**하는 겁니다.”

---

### 0) 오프닝 & 세팅 체크 (0~3분)
#### 말할 내용
- “Git은 결국 **변경사항을 스냅샷으로 저장**하고, 여러 사람이 그 스냅샷을 **합치는 기술**입니다.”
- “협업에서 사고가 나는 이유는 거의 두 가지예요:  
  - 같은 곳을 동시에 건드림 → **충돌(conflict)**  
  - 내가 늦게 push함 → **push rejected(non-fast-forward)**”

#### 슬라이드(권장)
- 오늘 커리큘럼 1장
- “항상 `git status`” 원칙 1장

---

### 1) 협업 흐름 1장으로 정리 (3~8분)
#### 말할 내용(짧게)
- “기본 협업 흐름은 이거 하나입니다:  
  **clone → branch → commit → push → PR → review → merge → pull**”
- “PR을 쓰는 이유는 ‘멋있어서’가 아니라 **충돌/품질 리스크를 낮추는 장치**라서예요.”

#### 슬라이드(권장)
- 위 흐름을 한 줄로 그린 다이어그램
- main 보호(Protected) + 리뷰 필수 원칙

---

### 2) 라이브코딩 데모 환경 만들기 (8~10분)
#### 말할 내용
- “실전에서는 GitHub가 원격이지만, 오늘은 로컬에서 **bare repo**로 원격을 흉내냅니다.”
- “터미널 두 개를 열고, 각각 Alice/Bob 역할로 진행하겠습니다.”

#### 터미널
- `docs/git-collab-lecture/03-terminal-demo-scripts.md`의 **Setup 스크립트** 실행

---

### 3) Merge Conflict 해결 (10~22분)
#### 시나리오 소개(강사 멘트)
- “A와 B가 **같은 파일의 같은 줄**을 각자 바꿉니다.  
  둘 다 맞는 변경일 수도 있는데, Git은 자동으로 결정을 못 해서 우리에게 물어봐요.”

#### 진행(라이브코딩)
- Alice/Bob 각각 브랜치에서 같은 라인 수정 → 충돌 유도
- 충돌 발생 시, 반드시 `git status`부터 보여주기

#### 충돌 마커 설명(보여주며 말하기)
- `<<<<<<<` : 현재(내) 버전(대개 HEAD)
- `=======` : 구분선
- `>>>>>>>` : 가져온 쪽(상대) 버전

#### 해결 전략(슬라이드 1장)
- **ours/theirs** 중 선택(빠른 해결)
- **둘 다 살리기**(현업에서 가장 흔함)
- **원인 자체를 줄이기**: PR을 작게, 동일 파일 동시 작업 피하기, “한 파일 오너” 합의

#### 자주 나오는 질문(Q&A 유도)
- “충돌을 해결한 뒤에는 왜 `add`가 필요하죠?”  
  → “Git에게 ‘이 파일은 이제 해결됐어’라고 표시해주는 단계”

---

### 4) Push Rejected(Non-fast-forward) 해결 (22~32분)
#### 시나리오 소개(강사 멘트)
- “push rejected는 ‘내 브랜치가 틀렸다’가 아니라, **원격이 더 앞서 있다**는 의미입니다.”

#### 원인/해결을 한 문장으로
- 원인: “원격에 내가 아직 못 받은 커밋이 있다”
- 해결: “원격을 먼저 가져오고, 내 커밋을 그 위에 올린 뒤(push) 다시 올린다”

#### 오늘 강의 기본 정책(중요)
- **merge 방식으로 통일**: `git pull` → `git push`
  - “실습생에게는 흐름이 단순한 게 최우선” (지금은 이것만 확실히)

> 심화(옵션): 팀이 선형 히스토리를 강하게 원하면 `git pull --rebase`를 도입할 수 있습니다.  
> 다만 초반에는 충돌 시 흐름(`rebase --continue/--abort`)까지 같이 알아야 해서 난이도가 올라갑니다.

#### 슬라이드(권장)
- push rejected(Non-fast-forward) 상황 커밋 그래프 1장(원격이 앞선 그림)

---

### 5) 브랜치 관리 & Stash (32~40분)
#### 브랜치 최소 규칙(강사 멘트)
- “브랜치는 **작업 단위**입니다. 크면 충돌/리뷰 비용이 폭증합니다.”
- 네이밍 예시: `feature/xxx`, `fix/xxx`, `hotfix/xxx`

#### stash를 ‘3개만’ 기억하기
- “갑자기 다른 급한 일을 해야 할 때, 커밋하기 애매한 변경을 잠깐 치워두는 것”
  - `git stash push -m "msg"`: 잠깐 치우기
  - `git stash push -u`: untracked까지 포함
  - `git stash branch <new> stash@{0}`: stash에서 브랜치 만들기(협업에서 특히 유용)

---

### 6) 파일/커밋 복구 (40~45분) + 미니 Q&A
#### 복구 치트시트(슬라이드 1장 권장)
- **파일만 되돌리기**: `git restore <file>`
- **공유 브랜치에서 안전하게 되돌리기**: `git revert <commit>`
- **내 로컬에서만 되돌리기**: `git reset --soft|--mixed|--hard <commit>`
- **최후의 보험**: `git reflog` (사라진 커밋 찾기)

#### 마무리 멘트
- “협업에서 중요한 건 ‘안 망하는 것’보다 **망해도 빨리 복구하는 능력**입니다.”


